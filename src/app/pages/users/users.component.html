<div class="page">

  <div class="page-header">
    <h2>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ (Users)</h2>
    <div class="header-actions">
     <input
        type="text"
        placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤..."
        [(ngModel)]="keyword"
        (input)="search()"
      />
      
    <button class="add-btn" (click)="openAdd()">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</button>
  </div>
  </div>

<div class="page-header">
  <section class="filter-bar">
    <div class="form-group">
      <label for="role">
        <i class="fa fa-users"></i> ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
      </label>
      <select
        id="role"
        class="form-control role-select"
        [(ngModel)]="role"
        (change)="search_role()"
      >
        <option value="">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</option>
        <option value="user">User</option>
        <option value="admin">Admin</option>
      </select>
    </div>
  </section>
</div>




  <p *ngIf="loading">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...</p>
  <p class="error" *ngIf="error">{{ error }}</p>

  <div class="table-card" *ngIf="!loading && users.length > 0">
    <table>
      <thead>
        <tr>
          <th>#</th>
          <th>Username</th>
          <th>‡∏ä‡∏∑‡πà‡∏≠</th>
          <th>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
        </tr>
      </thead>

      <tbody>
        <tr *ngFor="let u of users; index as i">
          <td>{{ i + 1 }}</td>
          <td>{{ u.username }}</td>
          <td>{{ u.name }}</td>
          <td class="actions">
            <button (click)="openEdit(u)">‚úèÔ∏è</button>
            <button class="delete-btn" (click)="confirmDelete(u.id)">üóëÔ∏è</button>

          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<!-- MODAL -->
<div class="modal" *ngIf="showForm">
  <div class="modal-card">
    <h3>{{ isEdit ? '‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ' : '‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ' }}</h3>

    <div class="form-group">
      <label>Username</label>
      <input [(ngModel)]="form.username">
    </div>

    <div class="form-group">
      <label>‡∏ä‡∏∑‡πà‡∏≠</label>
      <input [(ngModel)]="form.name">
    </div>

  <div class="form-group role-group">
    <label>
      <i class="fa fa-user-shield"></i>
      ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
    </label>

    <select
      [(ngModel)]="form.role"
      class="form-control role-select"
    >
      <option value="user">üë§ User</option>
      <option value="admin">üõ°Ô∏è Admin</option>
    </select>
  </div>



<div class="form-group">
  <label>‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</label>
  <input type="password" [(ngModel)]="form.password">
</div>

<div class="form-group">
  <label>‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</label>
  <input type="password" [(ngModel)]="form.password_confirmation">
</div>


    <div class="actions">
      <button class="save-btn" (click)="save()">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
      <button class="cancel-btn" (click)="closeForm()">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
    </div>
  </div>
</div>










<div class="toast" *ngIf="toast.show" [ngClass]="toast.type">
  {{ toast.message }}
</div>



<!-- CONFIRM DELETE -->
<div class="modal" *ngIf="showConfirm">
  <div class="modal-card confirm">
    <h3>‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö</h3>
    <p>‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ô‡∏µ‡πâ‡πÉ‡∏ä‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?</p>

    <div class="actions">
      <button class="cancel-btn" (click)="cancelDelete()">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
      <button class="delete-btn" (click)="deleteUser()">‡∏•‡∏ö</button>
    </div>
  </div>
</div>
