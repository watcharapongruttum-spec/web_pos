<div class="page">

  <!-- ===== HEADER ===== -->
  <div class="page-header">
    <h2>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (SKU)</h2>

   
  </div>

  <!-- ===== FILTER CATEGORY ===== -->
  <div class="page-header">

    <section class="filter-bar">
      <div class="form-group">
        <label for="search_category">
          <i class="fa fa-tags"></i> ‡∏´‡∏°‡∏ß‡∏î‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
        </label>

        <select
          id="search_category"
          class="form-control role-select"
          [(ngModel)]="search_cat"
          (change)="search_category()"
        >
      
          <option  value="" >‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</option>

          <option
            *ngFor="let cate of categories"
            [value]="cate.id"
          >
            {{ cate.name }}
          </option>
        </select>
      </div>
    </section>



     <div class="header-actions">
      <input
        type="text"
        placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤..."
        [(ngModel)]="searchKeyword"
        (input)="search()"
      />
      <button class="add-btn" (click)="openAdd()">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</button>
    </div>
  </div>


<div class="pagination-bar">

  <!-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ï‡πà‡∏≠‡∏´‡∏ô‡πâ‡∏≤ -->
  <div class="per-page">
    <label>‡πÅ‡∏™‡∏î‡∏á‡∏ï‡πà‡∏≠‡∏´‡∏ô‡πâ‡∏≤</label>
    <select
      [(ngModel)]="perPage"
      (change)="changePerPage(perPage)"
    >
      <option [value]="10">10</option>
      <option [value]="20">20</option>
      <option [value]="50">50</option>
      <option [value]="100">100</option>
    </select>
  </div>

  

  <!-- ‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏´‡∏ô‡πâ‡∏≤ -->
  <div class="pagination">
    <button style="margin-right: 10px;" (click)="loadSkuMasters('desc')">‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</button>




    <button
      (click)="goToPage(currentPage - 1)"
      [disabled]="currentPage === 1"
    >
      ‚óÄ
    </button>

    <span>
      ‡∏´‡∏ô‡πâ‡∏≤ {{ currentPage }} / {{ totalPages }}
    </span>

    <button
      (click)="goToPage(currentPage + 1)"
      [disabled]="currentPage === totalPages"
    >
      ‚ñ∂
    </button>
  </div>
</div>




  <!-- ===== LOADING / ERROR ===== -->
  <p *ngIf="loading">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...</p>
  <p class="error" *ngIf="error">{{ error }}</p>

  <!-- ===== TABLE ===== -->
  <div class="table-card" *ngIf="!loading && skuMasters && skuMasters.length > 0">

    <table *ngIf="skuMasters.length > 0">
      <thead>
        <tr>
          <th>#</th>
          <th>‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</th>
          <th>‡∏´‡∏°‡∏ß‡∏î</th>
          <th>‡∏£‡∏≤‡∏Ñ‡∏≤</th>
          <th>‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠</th>
          <th>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
        </tr>
      </thead>

      <tbody>
        <tr *ngFor="let sku of skuMasters; index as i">
          <td>{{ i + 1 }}</td>
          <td>{{ sku.name }}</td>
          <td>{{ sku.category_name }}</td>
          <td>{{ sku.price_float }}</td>
          <td>{{ sku.amount }}</td>
          <td class="actions">
            <button class="edit-btn" (click)="openEdit(sku)">‚úèÔ∏è</button>
            <button class="delete-btn" (click)="confirmDelete(sku.id)">üóëÔ∏è</button>
          </td>
        </tr>
      </tbody>
    </table>









    <!-- NO DATA -->
    <p class="no-data" *ngIf="skuMasters.length === 0">
      ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç
    </p>
  </div>

</div>

<!-- ===== MODAL ADD / EDIT ===== -->
<div class="modal" *ngIf="showForm">
  <div class="modal-card">
    <h3>{{ isEdit ? '‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤' : '‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤' }}</h3>

    <div class="form-group">
      <label>‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</label>
      <input
        type="text"
        [(ngModel)]="form.name"
        autofocus
      />
    </div>

    <div class="form-group">
      <label>‡∏´‡∏°‡∏ß‡∏î‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</label>
      <select [(ngModel)]="form.category_id" class="form-control">
        <option
          *ngFor="let category of categories"
          [value]="category.id"
        >
          {{ category.name }}
        </option>
      </select>
    </div>

    <div class="form-group">
      <label>‡∏£‡∏≤‡∏Ñ‡∏≤ (‡∏ö‡∏≤‡∏ó)</label>
      <input
        type="number"
        [(ngModel)]="form.price"
      />
    </div>

    <div class="form-group">
      <label>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠</label>
      <input
        type="number"
        [(ngModel)]="form.amount"
      />
    </div>

    <div class="actions">
      <button class="save-btn" (click)="save()">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
      <button class="cancel-btn" (click)="closeForm()">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
    </div>
  </div>
</div>

<!-- ===== SUCCESS ===== -->
<div class="toast success" *ngIf="successMessage">
  {{ successMessage }}
</div>

<!-- ===== ERROR ===== -->
<div class="toast error" *ngIf="errorMessage">
  {{ errorMessage }}
</div>

<!-- ===== DELETE CONFIRM ===== -->
<div class="modal" *ngIf="showDeleteConfirm">
  <div class="modal-card small">
    <h3>‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</h3>
    <p>‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ô‡∏µ‡πâ‡πÉ‡∏ä‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?</p>

    <div class="actions">
      <button
        class="delete-confirm-btn"
        (click)="deleteConfirmed()"
      >
        ‡∏•‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
      </button>
      <button
        class="cancel-btn"
        (click)="cancelDelete()"
      >
        ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å
      </button>
    </div>
  </div>
</div>
